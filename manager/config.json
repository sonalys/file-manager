{
  "log_level": "info",
  "mounts": {
    "0": "./storage"
  },
  "scripts": {
    "compress2heic": {
      "image": "docker.pkg.github.com/sonalys/file-manager/imagemagick",
      "version": "v0.0.1",
      "parameters": ["-quality", "65"],
      "binary": "/scripts/compress2heic",
      "timeout": "5s"
    },
    "detectron2": {
      "image": "docker.pkg.github.com/sonalys/file-manager/detectron2",
      "version": "v0.0.1",
      "parameters": [],
      "binary": "/scripts/detectron2",
      "timeout": "60s"
    },
    "yolo": {
      "image": "docker.pkg.github.com/sonalys/file-manager/yolo",
      "version": "v0.0.1-openimages",
      "parameters": [],
      "binary": "/scripts/detectron2",
      "timeout": "60s"
    }
  },
  "rules": [
    {
      "match": {
        "filename": ".*\\.(jpg|jpeg|bmp|png)"
      },
      "pipeline": ["yolo","compress2heic"]
    }
  ]
}
